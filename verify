#!/bin/bash
set -euo pipefail

cd "$(dirname "$0")"

echo "=== Format ==="
gofmt -w server/

echo "=== Lint ==="
# TODO: golangci-lint run ./server/...

echo "=== Test ==="
(cd server && go test -cover ./...)

echo "=== E2E ==="
rm -f server/babytrack.db  # Clean DB for reproducible tests
npx playwright test

echo ""
echo "âœ“ All checks passed"
